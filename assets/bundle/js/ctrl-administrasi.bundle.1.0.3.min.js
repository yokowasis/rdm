

angular.module("RdmApp").controller("DashboardCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(o,a,d,r,t,n,e,i){o.getdashboard=function(){i.get("administrasi/dashboard",(function(o){a.dashboard=o.data,a.logAdmin=o.log}))},o.getdashboard()}]);
angular.module("RdmApp").controller("adminrdmCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer","FileUploader",function(a,t,e,i,n,o,l,d,s){a.dtInstance={},a.datakelasedit={},a.savedataEdit=function(){$(".edit-modal").modal("hide"),$.blockUI({}),d.post("administrasi/admin/save",a.dataEdit,(function(a){$.unblockUI({}),a.success?(t.getdataadmin(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:a.message}).then((a=>{a.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},a.dodataDelete=function(a){Swal.fire({type:"warning",title:"Perhatian",confirmButtonText:"Yes, delete it!",showCancelButton:!0,html:"Apakah Anda yakin akan menghapus data ini?"}).then((e=>{e.value&&($.blockUI({}),d.post("administrasi/admin/delete",{guru_id:a},(function(a){$.unblockUI({}),a.success?(t.getdataadmin(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Dihapus",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:a.message})})))}))},a.dodataUpload=function(){$(".upload-modal").modal("show")},a.dodataTambah=function(){a.dataEdit={},a.dataEdit.edit=!1},a.dodataEdit=function(t){a.dataEdit=t,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},a.dtOptions=i.newOptions().withOption("searching",!0).withButtons([{extend:"copy",text:'<i class="fa fa-files-o"></i> Copy',titleAttr:"Copy"},{extend:"pdfHtml5",text:'<i class="fa fa-print" aria-hidden="true"></i> Print',download:"open",exportOptions:{columns:[0,2,3,4,5,7,8,9]},titleAttr:"Print",customize:function(a){t.customepdf(a,"Data Guru","Rapor Digital Madrasah")}},{extend:"excelHtml5",text:'<i class="fa fa-file-text-o"></i> Excel',exportOptions:{columns:[0,2,3,4,5,7,8,9]},titleAttr:"Excel"}]).withOption("stateSave",!0).withOption("paging",!0).withOption("processing",!0).withOption("drawCallback",(function(){$(".lazy").Lazy();try{a.$apply()}catch(a){}})).withPaginationType("full_numbers");var r=a.uploader=new s({url:base_url+"administrasi/guru/import"});a.berhasilaa=0,a.gandaaa=0,a.gagalaa=0,a.hapussemua=function(){r.clearQueue(),a.berhasilaa=0,a.gandaaa=0,a.gagalaa=0},r.filters.push({name:"customFilter",fn:function(a,t){return this.queue.length<100}}),r.filters.push({name:"imageFilter",fn:function(a,t){var e="|"+a.name.substr(a.name.lastIndexOf(".")+1)+"|";return console.info("type",e),-1!=="|xls|xlsx|".indexOf(e)}}),r.onSuccessItem=function(t,e,i,n){a.berhasilka=a.berhasilka+e.sukses,a.gandaaa=a.gandaaa+e.double1,a.gagalaa=a.gagalaa+e.gagal,a.$apply(),console.info("onSuccessItem",t,e,i,n,a.gandaaa)},r.onCompleteAll=function(){t.getdataadmin()},r.onBeforeUploadItem=function(a){a.url=base_url+"administrasi/guru/import"},r.onAfterAddingAll=function(a){r.uploadAll()}}]);
angular.module("RdmApp").controller("ajarCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer","FileUploader",function(a,t,e,i,l,n,o,s,d){a.dtInstance={},a.dataEdit={},a.setmengjar=function(e,i){$.blockUI({}),s.post("administrasi/ajar/save",e,(function(e){$.unblockUI({}),t.getdataguru(),e.success?(i.dataEdit.delete=e.data,Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):(a.reloadTable(),Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:e.message}))}))},a.dodataDelete=function(e,i){Swal.fire({type:"warning",title:"Perhatian",confirmButtonText:"Yes, delete it!",showCancelButton:!0,html:"Apakah Anda yakin akan menghapus data ini?"}).then((l=>{console.log(l),l.value&&($.blockUI({}),s.post("administrasi/ajar/delete",{ajar_id:e.delete},(function(l){$.unblockUI({}),t.getdataguru(),l.success?(i.select={},i.select.guru_id="",e.delete="",e.edit="",Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Dihapus",timer:1e3})):(a.reloadTable(),Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:l.message}))})))}))},t.dataajar={},a.reloadTable=function(){t.dataajar={},""!==a.selectData.kelas_id&&t.getdataajar(a.selectData)},a.dodataTambah=function(){""==a.selectData.kelas_id?Swal.fire({type:"warning",title:"Perhatian",showConfirmButton:!1,html:"Pilih kelas terlebih dahulu",timer:1e3}):(a.dataEdit={},a.dataEdit.kelas_id=a.selectData.kelas_id,a.dataEdit.tingkat_id=a.selectData.tingkat_id,a.dataEdit.edit=!1,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))},a.changeTingkat=function(){t.dataajar={},a.selectData.kelas_id=""},a.dodataUpload=function(){""==a.selectData.kelas_id?Swal.fire({type:"warning",title:"Perhatian",showConfirmButton:!1,html:"Pilih kelas terlebih dahulu",timer:1e3}):(a.dataEdit={},a.dataEdit.kelas_id=a.selectData.kelas_id,a.dataEdit.tingkat_id=a.selectData.tingkat_id,a.dataEdit.edit=!1,$(".upload-modal").modal("show"))},a.dodataEdit=function(t){a.dataEdit=t,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},a.selectData={},a.selectData.kelas_id="",a.selectData.tingkat_id="",a.dtOptions=i.newOptions().withOption("searching",!0).withButtons([{extend:"copy",text:'<i class="fa fa-files-o"></i> Copy',titleAttr:"Copy"},{extend:"pdfHtml5",text:'<i class="fa fa-print" aria-hidden="true"></i> Print',download:"open",exportOptions:{columns:[0,1,2,3]},titleAttr:"Print",customize:function(a){t.customepdf(a,"Absen ajar","Rapor Digital Madrasah")}},{extend:"excelHtml5",text:'<i class="fa fa-file-text-o"></i> Excel',exportOptions:{columns:[0,2,3]},titleAttr:"Excel"}]).withOption("paging",!0).withOption("stateSave",!0).withOption("processing",!0).withOption("responsive",!0).withOption("lengthMenu",[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]).withOption("columnDefs",[{width:"2%",targets:0},{width:"20%",targets:-2},{width:"20%",targets:1},{responsivePriority:1,targets:2},{responsivePriority:2,targets:-1}]).withOption("drawCallback",(function(){$(".lazy").Lazy();try{a.$apply()}catch(a){}}));var r=a.uploader=new d({url:base_url+"administrasi/ajar/import"});a.berhasilaa=0,a.gandaaa=0,a.gagalaa=0,a.hapussemua=function(){r.clearQueue(),a.berhasilaa=0,a.gandaaa=0,a.gagalaa=0},r.filters.push({name:"customFilter",fn:function(a,t){return this.queue.length<100}}),r.filters.push({name:"imageFilter",fn:function(a,t){var e="|"+a.name.substr(a.name.lastIndexOf(".")+1)+"|";return console.info("type",e),-1!=="|xls|xlsx|".indexOf(e)}}),r.onSuccessItem=function(t,e,i,l){a.berhasilka=a.berhasilka+e.sukses,a.gandaaa=a.gandaaa+e.double1,a.gagalaa=a.gagalaa+e.gagal,a.$apply(),console.info("onSuccessItem",t,e,i,l,a.gandaaa)},r.onCompleteAll=function(){a.reloadTable()},r.onBeforeUploadItem=function(t){t.url=base_url+"administrasi/ajar/import?kelas_id="+a.selectData.kelas_id+"&tingkat_id="+a.selectData.tingkat_id},r.onAfterAddingAll=function(a){r.uploadAll()}}]);
angular.module("RdmApp").controller("aturcetakCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(t,e,a,r,l,o,i,s){t.saveTempatCetak=function(){$.blockUI({}),s.post("administrasi/semester/cetaksave",{cetak_tanggal:e.aturcetak.cetak_tanggal,cetak_tempat:e.aturcetak.cetak_tempat,cetak_watermark:e.aturcetak.cetak_watermark},(function(t){$.unblockUI({}),null!==t&&t.success?(e.getsemester(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):null==t?Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:"Data Gagal Disimpan"}):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})}))}}]);
angular.module("RdmApp").controller("backuprestoreCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer","FileUploader",function(e,a,t,r,i,o,n,s,l){e.dtInstance={},e.newextra={},e.newextra.ekstrakurikuler_nama="",e.newextra.guru_id="",a.getdatabck=function(){$.blockUI({}),s.get("administrasi/backuprestore/data",(function(e){$.unblockUI({}),a.databackup=e.data}))},a.doBackupData=function(){$.blockUI({}),$.post("administrasi/backuprestore/backup").done((function(e,t,r){$.unblockUI({}),a.getdatabck(),"application/json"==(r.getResponseHeader("content-type")||"")?e.success?Swal.fire({type:"success",title:"Berhasil",text:"Backup File Berhasil Dibuat",showConfirmButton:!1,timer:1500}):Swal.fire({type:"error",title:"Gagal Membuat Backup",text:e.message,showConfirmButton:!0}):Swal.fire({type:"success",title:"Berhasil",text:"Backup File Berhasil Dibuat",showConfirmButton:!1,timer:1500})})).fail((function(e,t,r,i){$.unblockUI({}),a.getdatabck(),Swal.fire({type:"error",title:"Gagal menyimpan",text:"Koneksi keserver gagal",showConfirmButton:!0}),callback({success:!1,message:"Gagal menghubungi server."})}))},a.getdatabck(),e.dodataDelete=function(e){Swal.fire({type:"warning",title:"Perhatian",confirmButtonText:"Yes, delete it!",showCancelButton:!0,html:"Apakah Anda yakin akan menghapus backup ini?"}).then((t=>{t.value&&($.blockUI({}),s.post("administrasi/backuprestore/delete",{filename:e},(function(e){$.unblockUI({}),e.success?(a.getdatabck(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:e.message})})))}))},e.dodataEdit=function(a){e.editekstra(a.ekstrakurikuler_id,a.ekstrakurikuler_nama,a.guru_id,!0)},e.restore=function(){$(".upload-modal").modal("show")},e.currPg=0,e.dtOptions=r.newOptions().withOption("searching",!0).withOption("drawCallback",(function(a){if(a.aoData.length>0){var t=this.api().page.info();e.currPg=t.start}})).withOption("stateSave",!0).withOption("paging",!0).withOption("processing",!0).withPaginationType("full_numbers");var u=e.uploader=new l({url:base_url+"administrasi/siswa/import"});e.processRestore=function(t,r){var i=Math.round(t/e.datarestore.length*100);$.blockUI({message:"<h2>Harap bersabar!!</h2><h4>"+i+"% data sudah direstore!</h4>",baseZ:9999}),t<e.datarestore.length?(e.restoredata={},e.restoredata=e.datarestore[t],e.restoredata.start=r,s.post("administrasi/backuprestore/prosesfile",e.datarestore[t],(function(r){r.success?0==r.pending?e.processRestore(t+1,0):e.processRestore(t,r.pending):(a.getdatabck(),$.unblockUI({}),Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:"Data Gagal Direstore"}))}))):(a.getdatabck(),$.unblockUI({}),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!0,html:"Data Berhasil Direstore"}).then((e=>{e.value&&a.reloaddataadministrasi()})))},e.berhasilaa=0,e.gandaaa=0,e.gagalaa=0,e.hapussemua=function(){u.clearQueue(),e.berhasilaa=0,e.gandaaa=0,e.gagalaa=0},u.filters.push({name:"customFilter",fn:function(e,a){return this.queue.length<100}}),u.filters.push({name:"imageFilter",fn:function(e,a){var t="|"+e.name.substr(e.name.lastIndexOf(".")+1)+"|";if(console.info("type",t),-1!=="|rdm|".indexOf(t))return!0;$(".upload-modal").modal("hide"),Swal.fire({type:"error",title:"File backup",showConfirmButton:!0,html:"File yang anda upload bukan file Backup RDM, pastikan file backup memiliki extensi .rdm"}).then((e=>{e.value&&(u.clearQueue(),$(".upload-modal").modal("show"))}))}}),u.onSuccessItem=function(a,t,r,i){e.$apply(),t.success?(e.datarestore=t.data,$(".upload-modal").modal("hide"),null!==e.datarestore&&e.datarestore.length>0?e.processRestore(0,0):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message}),console.info("onSuccessItem",a,t,r,i,e.gandaaa)},u.onCompleteAll=function(){u.clearQueue()},u.onBeforeUploadItem=function(e){e.url=base_url+"administrasi/backuprestore/restore"},u.onAfterAddingAll=function(e){u.uploadAll()}}]);
angular.module("RdmApp").controller("ekstraCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(t,e,a,i,r,n,s,o){t.dtInstance={},t.newextra={},t.newextra.ekstrakurikuler_nama="",t.newextra.guru_id="",t.setpembina=function(e){t.newextra=e,t.saveeditekstra1()},t.saveeditekstra1=function(){$.blockUI({}),o.post("administrasi/ekstrakurikuler/save",t.newextra,(function(a){$.unblockUI({}),a.success?(t.newextra={},t.newextra.ekstrakurikuler_nama="",t.newextra.guru_id="",e.getdataekstra(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):(e.getdataekstra(),Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:a.message}))}))},t.saveeditekstra=function(){$(".edit-modal").modal("hide"),$.blockUI({}),o.post("administrasi/ekstrakurikuler/save",t.newextra,(function(a){$.unblockUI({}),a.success?(t.newextra={},t.newextra.ekstrakurikuler_nama="",t.newextra.guru_id="",e.getdataekstra(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:a.message}).then((t=>{t.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},t.dodataDelete=function(t){Swal.fire({type:"warning",title:"Perhatian",confirmButtonText:"Yes, delete it!",showCancelButton:!0,html:"Apakah Anda yakin akan menghapus data ini?"}).then((a=>{a.value&&($.blockUI({}),o.post("administrasi/ekstrakurikuler/delete",{ekstrakurikuler_id:t},(function(t){$.unblockUI({}),t.success?(e.getdataekstra(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})})))}))},t.dodataEdit=function(e){t.editekstra(e.ekstrakurikuler_id,e.ekstrakurikuler_nama,e.guru_id,!0)},t.editekstra=function(e,a,i,r){t.newextra.ekstrakurikuler_id=e,t.newextra.ekstrakurikuler_nama=a,t.newextra.guru_id=i,t.newextra.edit=r,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},t.currPg=0,e.getdataekstra=function(){o.get("administrasi/ekstrakurikuler/data",(function(t){$.unblockUI({}),e.dataekstrakurikuler1=t.data,e.datapembina1=t.guru}))},e.getdataekstra(),t.dtOptions=i.newOptions().withOption("searching",!0).withButtons([{extend:"copy",text:'<i class="fa fa-files-o"></i> Copy',titleAttr:"Copy"},{extend:"pdfHtml5",text:'<i class="fa fa-print" aria-hidden="true"></i> Print',download:"open",exportOptions:{columns:[0,1,2,3]},titleAttr:"Print",customize:function(t){e.customepdf(t,"Absen Siswa","Rapor Digital Madrasah")}},{extend:"excelHtml5",text:'<i class="fa fa-file-text-o"></i> Excel',exportOptions:{columns:[0,2,3]},titleAttr:"Excel"}]).withOption("drawCallback",(function(e){if(e.aoData.length>0){var a=this.api().page.info();t.currPg=a.start}})).withOption("paging",!0).withOption("processing",!1).withPaginationType("full_numbers")}]);
angular.module("RdmApp").controller("guruCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer","FileUploader",function(a,t,e,i,n,o,l,s,r){a.dtInstance={},a.datakelasedit={},a.savedataEdit=function(){$(".edit-modal").modal("hide"),$.blockUI({}),s.post("administrasi/guru/save",a.dataEdit,(function(a){$.unblockUI({}),a.success?(t.getdataguru(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:a.message}).then((a=>{a.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},a.dodataDelete=function(a){Swal.fire({type:"warning",title:"Perhatian",confirmButtonText:"Yes, delete it!",showCancelButton:!0,html:"Apakah Anda yakin akan menghapus data ini?"}).then((e=>{e.value&&($.blockUI({}),s.post("administrasi/guru/delete",{guru_id:a},(function(a){$.unblockUI({}),a.success?(t.getdataguru(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Dihapus",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:a.message})})))}))},a.dodataUpload=function(){$(".upload-modal").modal("show")},a.dodataTambah=function(){a.dataEdit={},a.dataEdit.edit=!1},a.dodataEdit=function(t){a.dataEdit=t,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},a.dtOptions=i.newOptions().withOption("searching",!0).withButtons([{extend:"copy",text:'<i class="fa fa-files-o"></i> Copy',titleAttr:"Copy"},{extend:"pdfHtml5",text:'<i class="fa fa-print" aria-hidden="true"></i> Print',download:"open",exportOptions:{columns:[0,2,3,4,5,7,8,9]},titleAttr:"Print",customize:function(a){t.customepdf(a,"Data Guru","Rapor Digital Madrasah")}},{extend:"excelHtml5",text:'<i class="fa fa-file-text-o"></i> Excel',exportOptions:{columns:[0,2,3,4,5,7,8,9]},titleAttr:"Excel"}]).withOption("stateSave",!0).withOption("paging",!0).withOption("processing",!0).withOption("drawCallback",(function(){$(".lazy").Lazy();try{a.$apply()}catch(a){}})).withPaginationType("full_numbers");var d=a.uploader=new r({url:base_url+"administrasi/guru/import"});a.berhasilaa=0,a.gandaaa=0,a.gagalaa=0,a.hapussemua=function(){d.clearQueue(),a.berhasilaa=0,a.gandaaa=0,a.gagalaa=0},d.filters.push({name:"customFilter",fn:function(a,t){return this.queue.length<100}}),d.filters.push({name:"imageFilter",fn:function(a,t){var e="|"+a.name.substr(a.name.lastIndexOf(".")+1)+"|";return console.info("type",e),-1!=="|xls|xlsx|".indexOf(e)}}),d.onSuccessItem=function(t,e,i,n){a.berhasilka=a.berhasilka+e.sukses,a.gandaaa=a.gandaaa+e.double1,a.gagalaa=a.gagalaa+e.gagal,a.$apply(),console.info("onSuccessItem",t,e,i,n,a.gandaaa)},d.onCompleteAll=function(){t.getdataguru()},d.onBeforeUploadItem=function(a){a.url=base_url+"administrasi/guru/import"},d.onAfterAddingAll=function(a){d.uploadAll()}}]);
angular.module("RdmApp").controller("kelasCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(t,e,a,i,l,s,o,n){t.dtInstance={},t.datakelasedit={},t.selectData={},t.selectData.tingkat_id="",t.deletekelas=function(t){Swal.fire({type:"warning",title:"Perhatian",confirmButtonText:"Yes, Hapus!",showCancelButton:!0,html:"Apakah Anda yakin akan menghapus kelas ini?"}).then((a=>{a.value&&($.blockUI({}),n.post("administrasi/kelas/delkelas",t,(function(t){$.unblockUI({}),t.success?(e.getdatakelas(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Dihapus",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})})))}))},t.saveeditkelas=function(){$(".edit-modal").modal("hide"),$.blockUI({}),n.post("administrasi/kelas/save",t.datakelasedit,(function(t){$.unblockUI({}),t.success?(e.getdatakelas(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message}).then((t=>{t.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},t.tambahKelas=function(e){t.datakelasedit={},t.datakelasedit.edit=!1},t.editkelas=function(e){t.datakelasedit=e,t.datakelasedit.edit=!0,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},t.dtOptions=i.newOptions().withOption("searching",!0).withButtons([{extend:"copy",text:'<i class="fa fa-files-o"></i> Copy',titleAttr:"Copy"},{extend:"pdfHtml5",text:'<i class="fa fa-print" aria-hidden="true"></i> Print',download:"open",exportOptions:{columns:[0,1,2,3]},titleAttr:"Print",customize:function(t){e.customepdf(t,"Absen Siswa","Rapor Digital Madrasah")}},{extend:"excelHtml5",text:'<i class="fa fa-file-text-o"></i> Excel',exportOptions:{columns:[0,2,3]},titleAttr:"Excel"}]).withOption("stateSave",!0).withOption("paging",!0).withOption("processing",!0).withPaginationType("full_numbers")}]);
angular.module("RdmApp").controller("kkmtingkatCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(a,t,e,i,n,d,r,k){a.dtInstance={},a.kkmChange=function(a,t){var e=Math.round((100-parseInt(t))/3,0),i=100-e,n=parseInt(t)+e;parseInt(t)<98?angular.forEach(a,(function(a,e){"A"==a.kkmgrade_kode?(a.kkmgrade_max=100,a.kkmgrade_min=i+1):"B"==a.kkmgrade_kode?(a.kkmgrade_max=i,a.kkmgrade_min=n):"C"==a.kkmgrade_kode?(a.kkmgrade_max=n-1,a.kkmgrade_min=t):(a.kkmgrade_max=parseInt(t)-1,a.kkmgrade_min=0)})):Swal.fire({type:"warning",title:"Perhatian",showConfirmButton:!0,html:"Nilai KKM tidak boleh melebihi angka 97"})},a.saveKkmTingkat=function(a){$(".edit-modal").modal("hide"),$.blockUI({}),k.post("administrasi/kkmtingkat/save",a,(function(a){$.unblockUI({}),a.success?(t.getdatakkm(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:a.message}).then((a=>{a.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},a.editekstra=function(t,e,i,n,d,r){a.dataekstraedit.ekstra_id=t,a.dataekstraedit.ekstra_nama=e,a.dataekstraedit.tingkat_id=i,a.dataekstraedit.jurusan_id=n,a.dataekstraedit.guru_id=d,a.dataekstraedit.edit=r;try{a.$apply()}catch(a){}$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},a.currPg=0,a.dtOptions=i.newOptions().withOption("searching",!0).withOption("drawCallback",(function(t){if(t.aoData.length>0){var e=this.api().page.info();a.currPg=e.start}})).withOption("stateSave",!0).withOption("paging",!0).withOption("processing",!0).withPaginationType("full_numbers"),t.datakkmtingkat=[],t.getdatakkm=function(){$(".table-responsive").block({}),k.get("administrasi/kkmtingkat/data",(function(a){$(".table-responsive").unblock({}),t.datakkmtingkat=a.data}))},0==t.datakkmtingkat.length&&t.getdatakkm()}]);
angular.module("RdmApp").controller("mapelCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(t,e,a,i,o,l,n,s){e.dataEdit={},t.syncronMapel=function(){$.blockUI({}),s.get("administrasi/mapel/syncron",(function(t){$.unblockUI({}),t.success?(e.getdataMapel(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1500})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})}))},t.savedataEdit=function(){$(".edit-modal").modal("hide"),$.blockUI({}),s.post("administrasi/mapel/save",e.dataEdit,(function(t){$.unblockUI({}),t.success?(e.getdataMapel(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message}).then((t=>{t.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},t.dodatamoveUp=function(t){console.log(t),$.blockUI({}),s.post("administrasi/mapel/moveup",{mapel_id:t},(function(t){$.unblockUI({}),t.success?(e.getdataMapel(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Nomor Urut Mapel berhasil di naikkan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})}))},t.dodatamoveDown=function(t){console.log(t),$.blockUI({}),s.post("administrasi/mapel/movedown",{mapel_id:t},(function(t){$.unblockUI({}),t.success?(e.getdataMapel(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Nomor Urut Mapel berhasil di turunkan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})}))},t.dodataDelete=function(t){Swal.fire({type:"warning",title:"Perhatian",confirmButtonText:"Yes, delete it!",showCancelButton:!0,html:"Apakah Anda yakin akan menghapus data ini?"}).then((a=>{a.value&&($.blockUI({}),s.post("administrasi/mapel/delete",{mapel_id:t},(function(t){$.unblockUI({}),t.success?(e.getdataMapel(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Dihapus",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})})))}))},t.tambahMapel=function(){e.dataEdit={},$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},t.dodataEdit=function(t){e.dataEdit=t,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},t.dtOptions=i.newOptions().withOption("searching",!0).withButtons([{extend:"copy",text:'<i class="fa fa-files-o"></i> Copy',titleAttr:"Copy"},{extend:"pdfHtml5",text:'<i class="fa fa-print" aria-hidden="true"></i> Print',download:"open",exportOptions:{columns:[0,1,2,3]},titleAttr:"Print",customize:function(t){e.customepdf(t,"Absen Siswa","Rapor Digital Madrasah")}},{extend:"excelHtml5",text:'<i class="fa fa-file-text-o"></i> Excel',exportOptions:{columns:[0,2,3]},titleAttr:"Excel"}]).withOption("stateSave",!0).withOption("paging",!0).withPaginationType("full_numbers")}]);
angular.module("RdmApp").controller("naikkelasCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(a,t,i,e,n,s,l,d){a.dtInstance={},a.dtInstance2={},a.dataEdit={},a.datakelasedit={},a.prosesNaik=function(){a.filteredArray=a.datasiswaasal.filter((function(a){return 1==a.select}));var t={};t.kelas_id=a.tujuanData.kelas_id,t.tahunajaran_id=a.tujuanData.tahunajaran_id,t.tingkat_id=a.tujuanData.tingkat_id,t.data=a.filteredArray,$.blockUI({}),d.post("administrasi/naikkelas/save",t,(function(t){$.unblockUI({}),t.success?(a.reloadTable(),a.reloadTableTujuan(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message}).then((a=>{a.dismiss===Swal.DismissReason.timer&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},a.batalNaik=function(){a.filteredArray=a.datasiswatujuan.filter((function(a){return 1==a.select}));var t={};t.kelas_id=a.selectData.kelas_id,t.tahunajaran_id=a.selectData.tahunajaran_id,t.tingkat_id=a.selectData.tingkat_id,t.data=a.filteredArray,$.blockUI({}),d.post("administrasi/naikkelas/batalnaik",t,(function(t){$.unblockUI({}),t.success?(a.reloadTable(),a.reloadTableTujuan(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message}).then((a=>{a.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},t.datasiswaasal=[],a.reloadTable=function(){t.datasiswaasal=[],""!==a.selectData.kelas_id&&($.blockUI({}),d.post("administrasi/naikkelas/data",a.selectData,(function(a){$.unblockUI({}),t.datasiswaasal=a.data})))},t.datasiswatujuan=[],a.reloadTableTujuan=function(){t.datasiswatujuan=[],""!==a.tujuanData.kelas_id&&($.blockUI({}),d.post("administrasi/naikkelas/data",a.tujuanData,(function(a){$.unblockUI({}),t.datasiswatujuan=a.data})))},a.saveeditkelas=function(){$(".edit-modal").modal("hide"),$.blockUI({}),console.log(a.datakelasedit),d.post("administrasi/naikkelas/savekelas",a.datakelasedit,(function(t){$.unblockUI({}),t.success?(a.getdatatingkat(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message}).then((a=>{a.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},a.datakelasedit={},a.dodataEdit=function(){a.datakelasedit={},a.datakelasedit.tingkat_id=a.tujuanData.tingkat_id,a.datakelasedit.tahunajaran_id=t.tujuanajaran.tahunajaran_id,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},a.changeTingkat=function(){a.tujuanData.tingkat_id=parseInt(a.selectData.tingkat_id)+1+"",a.selectData.kelas_id="",a.tujuanData.kelas_id="",t.datasiswaasal=[],t.datasiswatujuan=[]},a.currPg=0,a.recordsDisplay=0,a.currPg2=0,a.recordsDisplay2=0,a.tujuanData={},a.tujuanData.kelas_id="",a.tujuanData.tingkat_id="",a.tujuanData.tahunajaran_id="",a.selectData={},a.selectData.kelas_id="",a.selectData.tingkat_id="",a.selectData.tahunajaran_id="",a.dtOptions=e.newOptions().withOption("searching",!0).withOption("paging",!0).withOption("processing",!0).withOption("stateSave",!0).withOption("columnDefs",[{orderable:!1,targets:0}]).withOption("drawCallback",(function(t){if(t.aoData.length>0){var i=this.api().page.info();a.currPg=i.start,a.recordsDisplay=i.recordsDisplay}})).withOption("lengthMenu",[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]),a.dtOptions2=e.newOptions().withOption("searching",!0).withOption("paging",!0).withOption("processing",!0).withOption("columnDefs",[{orderable:!1,targets:0}]).withOption("drawCallback",(function(t){if(t.aoData.length>0){var i=this.api().page.info();a.currPg2=i.start,a.recordsDisplay2=i.recordsDisplay}})).withOption("lengthMenu",[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]),a.getdatatingkat=function(){d.get("administrasi/naikkelas/datatingkat",(function(i){t.asalajaran=i.asalajaran,t.tujuanajaran=i.tujuanajaran,t.tujuantingkat=i.tujuantingkat,t.tujuankelas=i.tujuankelas,a.tujuanData.tahunajaran_id=t.tujuanajaran.tahunajaran_id,a.selectData.tahunajaran_id=t.asalajaran.tahunajaran_id,a.lastkelas=0,angular.forEach(t.tujuantingkat,(function(t){a.lastkelas=t.tingkat_id}))}))},a.getdatatingkat()}]);
angular.module("RdmApp").controller("pengaturanCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(a,t,e,n,i,r,l,s){a.savetahunajaran=function(){$.blockUI({}),s.post("administrasi/pengaturan/save",{tahunajaran_id:t.tahunajaran.aktif,semester_id:t.datasemester.aktif,sistem_penilaian:t.penilaian.system},(function(a){$.unblockUI({}),null!==a&&a.success?(t.getpengaturan(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):null==a?Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:"Data Gagal Disimpan"}):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:a.message})}))}}]);
angular.module("RdmApp").controller("pindahkelasCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer","FileUploader",function(a,t,i,n,e,s,l,d,o){a.dtInstance={},a.dtInstance2={},a.dataEdit={},a.prosesNaik=function(){a.filteredArray=a.datasiswaasal.filter((function(a){return 1==a.select}));var t={};t.kelas_id=a.tujuanData.kelas_id,t.tingkat_id=a.selectData.tingkat_id,t.data=a.filteredArray,$.blockUI({}),d.post("administrasi/pindahkelas/save",t,(function(t){$.unblockUI({}),t.success?(a.reloadTable(),a.reloadTableTujuan(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message}).then((a=>{a.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},t.datasiswaasal={},a.reloadTable=function(){t.datasiswaasal={},""!==a.selectData.kelas_id&&($.blockUI({}),d.post("administrasi/pindahkelas/data",a.selectData,(function(a){$.unblockUI({}),t.datasiswaasal=a.data})))},t.datasiswatujuan={},a.reloadTableTujuan=function(){t.datasiswatujuan={},""!==a.tujuanData.kelas_id&&($.blockUI({}),d.post("administrasi/pindahkelas/data",a.tujuanData,(function(a){$.unblockUI({}),t.datasiswatujuan=a.data})))},a.dodataEdit=function(t){a.dataEdit=t,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},a.changeTingkat=function(){a.tujuanData.kelas_id="",a.selectData.kelas_id="",t.datasiswatujuan={},t.datasiswaasal={}},a.currPg=0,a.recordsDisplay=0,a.currPg2=0,a.recordsDisplay2=0,a.tujuanData={},a.tujuanData.kelas_id="",a.tujuanData.tingkat_id="",a.tujuanData.tahunajaran_id="",a.selectData={},a.selectData.kelas_id="",a.selectData.tingkat_id="",a.selectData.tahunajaran_id="",a.dtOptions=n.newOptions().withOption("searching",!0).withOption("paging",!0).withOption("stateSave",!0).withOption("processing",!0).withOption("columnDefs",[{orderable:!1,targets:0}]).withOption("drawCallback",(function(t){if(t.aoData.length>0){var i=this.api().page.info();a.currPg=i.start,a.recordsDisplay=i.recordsDisplay}})).withOption("lengthMenu",[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]),a.dtOptions2=n.newOptions().withOption("searching",!0).withOption("paging",!0).withOption("processing",!0).withOption("columnDefs",[{orderable:!1,targets:0}]).withOption("drawCallback",(function(t){if(t.aoData.length>0){var i=this.api().page.info();a.currPg2=i.start,a.recordsDisplay2=i.recordsDisplay}})).withOption("lengthMenu",[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]]),a.getdatatingkat=function(){d.get("administrasi/pindahkelas/datatingkat",(function(i){t.asalajaran=i.asalajaran,t.tujuanajaran=i.tujuanajaran,t.asaltingkat=i.asaltingkat,t.asalkelas=i.asalkelas,a.tujuanData.tahunajaran_id=t.tujuanajaran.tahunajaran_id,a.selectData.tahunajaran_id=t.asalajaran.tahunajaran_id}))},a.getdatatingkat()}]);
angular.module("RdmApp").controller("profileCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(t,i,e,o,s,a,r,n){i.password={},t.hapusLogo=function(){$.blockUI({}),n.get("administrasi/hapuslogo",(function(t){$.unblockUI({}),t.success?(i.getprofile(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Logo berhasil dihapus",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})}))},t.savePimpinan=function(){$.blockUI({}),n.post("administrasi/savepimpinan",i.pimpinan,(function(t){$.unblockUI({}),t.success?(i.getprofile(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})}))},t.syncProfile=function(){$.blockUI({}),n.post("administrasi/syncprofile",i.pimpinan,(function(t){$.unblockUI({}),t.success?(i.getprofile(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})}))},t.savePassword=function(){$.blockUI({}),n.post("administrasi/ubahpassword",i.password,(function(t){$.unblockUI({}),t.success?(i.password.password="",i.password.konfirmasi="",Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})}))},t.browseimage=function(){$("#imageFile").click()},t.$on("pictureInsert",(function(t,e){$("#imageFile").val(null),i.dataprofile.administrasi_foto=e}))}]),angular.module("RdmApp").directive("myDirective",["httpPostFactory",function(t){return{restrict:"A",scope:!0,link:function(i,e,o){e.bind("change",(function(){$.blockUI({});var o=new FormData;o.append("file",e[0].files[0]);var s=e[0].getAttribute("data-url");e[0].getAttribute("image-container");t(s,o,(function(t){$.unblockUI({}),t&&t.success?i.$emit("pictureInsert",t.data):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.data})}))}))}}}]);
angular.module("RdmApp").controller("semesterCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer",function(e,t,s,r,a,i,l,o){e.savesemester=function(){$.blockUI({}),o.post("administrasi/semester/save",{aktif:t.datasemester.aktif},(function(e){$.unblockUI({}),null!==e&&e.success?(t.getsemester(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):null==e?Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:"Data Gagal Disimpan"}):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:e.message})}))}}]);
angular.module("RdmApp").controller("siswaCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer","FileUploader",function(a,t,e,i,l,n,s,o,d){a.dtInstance={},a.dataEdit={},a.savedataEdit=function(){$(".edit-modal").modal("hide"),$.blockUI({}),o.post("administrasi/siswa/save",a.dataEdit,(function(t){$.unblockUI({}),t.success?(a.reloadTable(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message}).then((a=>{a.value&&($(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))}))}))},a.dodataDelete=function(t){Swal.fire({type:"warning",title:"Perhatian",confirmButtonText:"Yes, delete it!",showCancelButton:!0,html:"Apakah Anda yakin akan menghapus data ini?"}).then((e=>{e.value&&($.blockUI({}),o.post("administrasi/siswa/delete",{siswa_id:t},(function(t){$.unblockUI({}),t.success?(a.reloadTable(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Dihapus",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})})))}))},a.reloadTable=function(){t.datasiswa={},""!==a.selectData.kelas_id&&t.getdatasiswa(a.selectData)},a.dodataTambah=function(){""==a.selectData.kelas_id?Swal.fire({type:"warning",title:"Perhatian",showConfirmButton:!1,html:"Pilih kelas terlebih dahulu",timer:1e3}):(a.dataEdit={},a.dataEdit.kelas_id=a.selectData.kelas_id,a.dataEdit.tingkat_id=a.selectData.tingkat_id,a.dataEdit.edit=!1,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))},a.dodataUpload=function(){""==a.selectData.kelas_id?Swal.fire({type:"warning",title:"Perhatian",showConfirmButton:!1,html:"Pilih kelas terlebih dahulu",timer:1e3}):(a.dataEdit={},a.dataEdit.kelas_id=a.selectData.kelas_id,a.dataEdit.tingkat_id=a.selectData.tingkat_id,a.dataEdit.edit=!1,$(".upload-modal").modal("show"))},a.clearKelas=function(e){a.selectData.kelas_id="",t.datasiswa={}},a.dodataEdit=function(t){a.dataEdit=t,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"})},a.selectData={},a.selectData.kelas_id="",a.selectData.tingkat_id="",a.dtOptions=i.newOptions().withOption("searching",!0).withButtons([{extend:"copy",text:'<i class="fa fa-files-o"></i> Copy',titleAttr:"Copy"},{extend:"pdfHtml5",text:'<i class="fa fa-print" aria-hidden="true"></i> Print',download:"open",exportOptions:{columns:[0,2,3,4,5,6]},titleAttr:"Print",customize:function(a){t.customepdf(a,"Data Siswa","RDM")}},{extend:"excelHtml5",text:'<i class="fa fa-file-text-o"></i> Excel',exportOptions:{columns:[0,2,3,4,5,6]},titleAttr:"Excel"}]).withOption("paging",!0).withOption("stateSave",!0).withOption("processing",!0).withOption("drawCallback",(function(){$(".lazy").Lazy();try{a.$apply()}catch(a){}})).withPaginationType("full_numbers");var r=a.uploader=new d({url:base_url+"administrasi/siswa/import"});a.berhasilaa=0,a.gandaaa=0,a.gagalaa=0,a.hapussemua=function(){r.clearQueue(),a.berhasilaa=0,a.gandaaa=0,a.gagalaa=0},r.filters.push({name:"customFilter",fn:function(a,t){return this.queue.length<100}}),r.filters.push({name:"imageFilter",fn:function(a,t){var e="|"+a.name.substr(a.name.lastIndexOf(".")+1)+"|";return console.info("type",e),-1!=="|xls|xlsx|".indexOf(e)}}),r.onSuccessItem=function(t,e,i,l){a.berhasilka=a.berhasilka+e.sukses,a.gandaaa=a.gandaaa+e.double1,a.gagalaa=a.gagalaa+e.gagal,a.$apply(),console.info("onSuccessItem",t,e,i,l,a.gandaaa)},r.onCompleteAll=function(){a.reloadTable()},r.onBeforeUploadItem=function(t){t.url=base_url+"administrasi/siswa/import?kelas_id="+a.selectData.kelas_id+"&tingkat_id="+a.selectData.tingkat_id},r.onAfterAddingAll=function(a){r.uploadAll()}}]);
angular.module("RdmApp").controller("statusnilaiCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer","FileUploader",function(a,t,i,e,l,n,s,o,d){a.dtInstance={},a.dataEdit={},a.dodataDelete=function(t){Swal.fire({type:"warning",title:"Perhatian",confirmButtonText:"Yes, delete it!",showCancelButton:!0,html:"Apakah Anda yakin akan menghapus data ini?"}).then((i=>{i.value&&($.blockUI({}),o.post("administrasi/siswa/delete",{siswa_id:t},(function(t){$.unblockUI({}),t.success?(a.reloadTable(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Dihapus",timer:1e3})):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:t.message})})))}))},t.walasnilai={},t.getwalasnilai=function(){""!==t.walas&&($.blockUI({}),o.get("administrasi/datanilai/"+a.selectData.kelas_id,(function(a){$.unblockUI({}),t.walasnilai=a.data,t.walaskirim=a.kirim,t.nilailock=a.nilailock})))},t.locknilai=function(i){""!==t.walas&&($.blockUI({}),o.post("administrasi/locknilai/",{kelas:a.selectData.kelas_id,status:i},(function(a){$.unblockUI({}),t.getwalasnilai()})))},a.reloadTable=function(){t.walasnilai={},t.walaskirim={},""!==a.selectData.kelas_id&&t.getwalasnilai()},a.dodataTambah=function(){""==a.selectData.kelas_id?Swal.fire({type:"warning",title:"Perhatian",showConfirmButton:!1,html:"Pilih kelas terlebih dahulu",timer:1e3}):(a.dataEdit={},a.dataEdit.kelas_id=a.selectData.kelas_id,a.dataEdit.tingkat_id=a.selectData.tingkat_id,a.dataEdit.edit=!1,$(".edit-modal").modal("show"),$(".modal-dialog").draggable({handle:".modal-header"}))},a.dodataUpload=function(){""==a.selectData.kelas_id?Swal.fire({type:"warning",title:"Perhatian",showConfirmButton:!1,html:"Pilih kelas terlebih dahulu",timer:1e3}):(a.dataEdit={},a.dataEdit.kelas_id=a.selectData.kelas_id,a.dataEdit.tingkat_id=a.selectData.tingkat_id,a.dataEdit.edit=!1,$(".upload-modal").modal("show"))},a.clearKelas=function(i){a.selectData.kelas_id="",t.walasnilai={}},a.selectData={},a.selectData.kelas_id="",a.selectData.tingkat_id="",a.dtOptions=e.newOptions().withOption("stateSave",!0).withOption("searching",!0).withOption("paging",!1).withOption("responsive",!0).withOption("ordering",!1).withOption("processing",!1)}]);
angular.module("RdmApp").controller("tahunajaranCtrl",["$scope","$rootScope","common","DTOptionsBuilder","DTColumnBuilder","$http","$q","ApiServer","FileUploader",function(a,t,n,e,r,l,i,o){a.savetahunajaran=function(){$.blockUI({}),o.post("administrasi/tahunajaran/save",{aktif:t.tahunajaran.aktif},(function(a){$.unblockUI({}),null!==a&&a.success?(t.gettahunajaran(),Swal.fire({type:"success",title:"Berhasil",showConfirmButton:!1,html:"Data Berhasil Disimpan",timer:1e3})):null==a?Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:"Data Gagal Disimpan"}):Swal.fire({type:"error",title:"Gagal",showConfirmButton:!0,html:a.message})}))}}]);
